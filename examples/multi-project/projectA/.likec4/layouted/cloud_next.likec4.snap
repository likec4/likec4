{
  _type: 'element',
  tags: null,
  links: null,
  viewOf: 'cloud.next',
  _stage: 'layouted',
  sourcePath: 'cloud/next.c4',
  description: null,
  title: 'Context / Cloud / Next',
  id: 'cloud_next',
  autoLayout: {
    direction: 'TB',
  },
  notation: {
    nodes: [
      {
        title: 'Application',
        shape: 'rectangle',
        color: 'primary',
        kinds: [
          'app',
        ],
      },
      {
        title: 'External System',
        shape: 'rectangle',
        color: 'amber',
        kinds: [
          'externalSystem',
        ],
      },
    ],
  },
  hash: '7b917000d08b57f93dbbca3e34d1343093680f40',
  bounds: {
    x: 9,
    y: 0,
    width: 1108,
    height: 1550,
  },
  nodes: [
    {
      id: 'cloud.ui',
      parent: null,
      level: 0,
      children: [],
      inEdges: [],
      outEdges: [
        '3xhq7i',
      ],
      title: 'Frontends',
      modelRef: 'cloud.ui',
      shape: 'browser',
      color: 'slate',
      style: {
        opacity: 50,
        size: 'md',
      },
      description: {
        txt: 'All the frontend applications\nof Cloud System',
      },
      tags: [],
      kind: 'container',
      navigateTo: 'cloud_ui',
      x: 49,
      y: 0,
      width: 320,
      height: 180,
      labelBBox: {
        x: 66,
        y: 54,
        width: 188,
        height: 66,
      },
    },
    {
      id: 'cloud.next',
      parent: null,
      level: 0,
      children: [
        'cloud.next.graphql',
        'cloud.next.backend',
        'cloud.next.events',
      ],
      inEdges: [
        '3xhq7i',
      ],
      outEdges: [
        '1mrbzo2',
        '19wveg5',
        '122zd3e',
      ],
      title: 'Cloud Next',
      modelRef: 'cloud.next',
      shape: 'rectangle',
      color: 'primary',
      style: {
        opacity: 10,
        size: 'md',
        border: 'none',
      },
      description: {
        txt: 'Cloud Next is the next version of our cloud systems',
      },
      tags: [],
      kind: 'container',
      depth: 1,
      x: 9,
      y: 336,
      width: 797,
      height: 882,
      labelBBox: {
        x: 6,
        y: 0,
        width: 76,
        height: 15,
      },
    },
    {
      id: 'cloud.next.graphql',
      parent: 'cloud.next',
      level: 1,
      children: [],
      inEdges: [
        '3xhq7i',
      ],
      outEdges: [
        '8gzokf',
      ],
      title: 'GraphQL',
      modelRef: 'cloud.next.graphql',
      shape: 'rectangle',
      color: 'sky',
      icon: 'tech:graphql',
      style: {
        opacity: 10,
        size: 'md',
        border: 'none',
      },
      description: {
        txt: 'GraphQL API for the backend\nUses Apollo Server',
      },
      tags: [
        'api',
        'next',
      ],
      kind: 'component',
      navigateTo: 'graphql',
      x: 444,
      y: 391,
      width: 321,
      height: 180,
      labelBBox: {
        x: 46,
        y: 54,
        width: 260,
        height: 66,
      },
    },
    {
      id: 'cloud.next.backend',
      parent: 'cloud.next',
      level: 1,
      children: [],
      inEdges: [
        '8gzokf',
      ],
      outEdges: [
        '1590sfl',
        '1mrbzo2',
        '19wveg5',
      ],
      title: 'Backend V2',
      modelRef: 'cloud.next.backend',
      shape: 'rectangle',
      color: 'primary',
      icon: 'tech:nestjs',
      style: {
        opacity: 10,
        size: 'md',
        multiple: true,
        border: 'none',
      },
      description: {
        txt: 'The next version of backend',
      },
      tags: [
        'api',
      ],
      notation: 'Application',
      kind: 'app',
      navigateTo: 'backend',
      x: 49,
      y: 655,
      width: 320,
      height: 180,
      labelBBox: {
        x: 50,
        y: 63,
        width: 250,
        height: 47,
      },
    },
    {
      id: 'cloud.next.events',
      parent: 'cloud.next',
      level: 1,
      children: [],
      inEdges: [
        '1590sfl',
      ],
      outEdges: [
        '122zd3e',
      ],
      title: 'Events Manager',
      modelRef: 'cloud.next.events',
      shape: 'rectangle',
      color: 'primary',
      style: {
        opacity: 10,
        size: 'md',
        border: 'none',
      },
      tags: [],
      kind: 'component',
      x: 49,
      y: 998,
      width: 320,
      height: 180,
      labelBBox: {
        x: 85,
        y: 74,
        width: 150,
        height: 24,
      },
    },
    {
      id: 'cloud.legacy',
      parent: null,
      level: 0,
      children: [],
      inEdges: [
        '1mrbzo2',
      ],
      outEdges: [
        '1g755bx',
      ],
      title: 'Cloud Legacy',
      modelRef: 'cloud.legacy',
      shape: 'rectangle',
      color: 'slate',
      style: {
        opacity: 50,
        size: 'md',
      },
      description: {
        md: 'The **legacy** version of our SaaS\nMVP as was presented to the first customers',
      },
      tags: [
        'deprecated',
      ],
      links: [
        {
          url: './.github/workflows/update-diagrams.yml#L19-L25',
          title: 'L19-L25',
          relative: '.github/workflows/update-diagrams.yml#L19-L25',
        },
      ],
      kind: 'container',
      navigateTo: 'cloud_legacy',
      x: 780,
      y: 998,
      width: 337,
      height: 180,
      labelBBox: {
        x: 18,
        y: 54,
        width: 302,
        height: 66,
      },
    },
    {
      id: 'amazon',
      parent: null,
      level: 0,
      children: [
        'amazon.rds',
        'amazon.sqs',
      ],
      inEdges: [
        '19wveg5',
        '1g755bx',
        '122zd3e',
      ],
      outEdges: [],
      title: 'Amazon',
      modelRef: 'amazon',
      shape: 'rectangle',
      color: 'amber',
      icon: 'tech:amazon-web-services',
      style: {
        opacity: 20,
        size: 'md',
      },
      description: {
        txt: 'Cloud and managed services provider',
      },
      tags: [],
      notation: 'External System',
      kind: 'externalSystem',
      depth: 1,
      navigateTo: 'amazon',
      x: 147,
      y: 1269,
      width: 830,
      height: 281,
      labelBBox: {
        x: 6,
        y: 0,
        width: 52,
        height: 15,
      },
    },
    {
      id: 'amazon.rds',
      parent: 'amazon',
      level: 1,
      children: [],
      inEdges: [
        '19wveg5',
        '1g755bx',
      ],
      outEdges: [],
      title: 'RDS',
      modelRef: 'amazon.rds',
      shape: 'storage',
      color: 'amber',
      icon: 'aws:rds',
      style: {
        opacity: 20,
        size: 'md',
      },
      description: {
        txt: 'Relational Database Service',
      },
      tags: [],
      kind: 'container',
      navigateTo: 'amazon_rds',
      x: 617,
      y: 1330,
      width: 320,
      height: 180,
      labelBBox: {
        x: 49,
        y: 63,
        width: 252,
        height: 48,
      },
    },
    {
      id: 'amazon.sqs',
      parent: 'amazon',
      level: 1,
      children: [],
      inEdges: [
        '122zd3e',
      ],
      outEdges: [],
      title: 'SQS',
      modelRef: 'amazon.sqs',
      shape: 'rectangle',
      color: 'amber',
      icon: 'aws:simple-queue-service',
      style: {
        opacity: 20,
        size: 'md',
      },
      description: {
        txt: 'Simple Queue Service',
      },
      tags: [],
      kind: 'container',
      navigateTo: 'amazon_sqs',
      x: 187,
      y: 1330,
      width: 320,
      height: 180,
      labelBBox: {
        x: 69,
        y: 63,
        width: 212,
        height: 48,
      },
    },
  ],
  edges: [
    {
      id: '3xhq7i',
      source: 'cloud.ui',
      target: 'cloud.next.graphql',
      label: '[...]',
      dotpos: 'e,209,332.26 209,179.87 209,223.7 209,276.72 209,321.86',
      points: [
        [
          209,
          180,
        ],
        [
          209,
          224,
        ],
        [
          209,
          277,
        ],
        [
          209,
          322,
        ],
      ],
      labelBBox: {
        x: 291,
        y: 312.5,
        width: 25,
        height: 18,
      },
      parent: null,
      relations: [
        'ci8dgt',
        'njj2bv',
        '650ftt',
        'kv3t0l',
        '1oj61r6',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      controlPoints: [
        {
          x: 209,
          y: 251,
        },
      ],
    },
    {
      id: '1590sfl',
      source: 'cloud.next.backend',
      target: 'cloud.next.events',
      label: 'triggers',
      dotpos: 'e,209,998.1 209,834.56 209,881.46 209,939.19 209,987.6',
      points: [
        [
          209,
          835,
        ],
        [
          209,
          881,
        ],
        [
          209,
          939,
        ],
        [
          209,
          988,
        ],
      ],
      labelBBox: {
        x: 209,
        y: 911.5,
        width: 51,
        height: 39,
      },
      parent: 'cloud.next',
      relations: [
        'tjd6lh',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      technology: 'REST',
    },
    {
      id: '8gzokf',
      source: 'cloud.next.graphql',
      target: 'cloud.next.backend',
      label: '[...]',
      dotpos: 'e,209,654.97 209,511.93 209,553.13 209,602.24 209,644.63',
      points: [
        [
          209,
          512,
        ],
        [
          209,
          553,
        ],
        [
          209,
          602,
        ],
        [
          209,
          645,
        ],
      ],
      labelBBox: {
        x: 283.5,
        y: 548.5,
        width: 25,
        height: 18,
      },
      parent: 'cloud.next',
      relations: [
        '7vlt6f',
        'p14epf',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      controlPoints: [
        {
          x: 209,
          y: 578,
        },
      ],
    },
    {
      id: '1mrbzo2',
      source: 'cloud.next.backend',
      target: 'cloud.legacy',
      label: null,
      dotpos: 'e,837.14,998.11 368.9,784.68 460.25,809.96 575.48,847.1 672,894.8 726.21,921.59 781.77,958.05 828.76,992.02',
      points: [
        [
          369,
          785,
        ],
        [
          460,
          810,
        ],
        [
          575,
          847,
        ],
        [
          672,
          895,
        ],
        [
          726,
          922,
        ],
        [
          782,
          958,
        ],
        [
          829,
          992,
        ],
      ],
      labelBBox: null,
      parent: null,
      relations: [
        'i1pi95',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
    },
    {
      id: '19wveg5',
      source: 'cloud.next.backend',
      target: 'amazon.rds',
      label: 'reads/writes',
      description: {
        md: '## Reads/writes users table.\n\n[deprecated, moving to Aurora]',
      },
      dotpos: 'e,702.15,1329.3 285.05,834.65 326.26,882.89 378.03,943.63 424,998 517.46,1108.5 624.17,1236 695.57,1321.4',
      points: [
        [
          285,
          835,
        ],
        [
          326,
          883,
        ],
        [
          378,
          944,
        ],
        [
          424,
          998,
        ],
        [
          517,
          1109,
        ],
        [
          624,
          1236,
        ],
        [
          696,
          1321,
        ],
      ],
      labelBBox: {
        x: 491,
        y: 1077.5,
        width: 79,
        height: 18,
      },
      parent: null,
      relations: [
        '14uyrh3',
      ],
      color: 'indigo',
      line: 'solid',
      head: 'normal',
      navigateTo: 'cloud-to-amazon',
      isCustomized: true,
    },
    {
      id: '1g755bx',
      source: 'cloud.legacy',
      target: 'amazon.rds',
      label: 'reads/writes',
      dotpos: 'e,823.85,1329.1 902.68,1177.9 879.83,1221.7 852.19,1274.7 828.65,1319.9',
      points: [
        [
          903,
          1178,
        ],
        [
          880,
          1222,
        ],
        [
          852,
          1275,
        ],
        [
          829,
          1320,
        ],
      ],
      labelBBox: {
        x: 866,
        y: 1249,
        width: 79,
        height: 18,
      },
      parent: null,
      relations: [
        'wb50a3',
      ],
      color: 'indigo',
      line: 'solid',
      head: 'normal',
      isCustomized: true,
    },
    {
      id: '122zd3e',
      source: 'cloud.next.events',
      target: 'amazon.sqs',
      label: 'publishes events',
      description: {
        txt: '',
      },
      dotpos: 'e,309.89,1330.3 246.16,1177.9 264.61,1222 286.94,1275.4 305.9,1320.7',
      points: [
        [
          246,
          1178,
        ],
        [
          265,
          1222,
        ],
        [
          287,
          1275,
        ],
        [
          306,
          1321,
        ],
      ],
      labelBBox: {
        x: 276.5,
        y: 1249.5,
        width: 108,
        height: 18,
      },
      parent: null,
      relations: [
        '13t2tod',
        '1kvdqv3',
        '1tl8shp',
      ],
      color: 'indigo',
      line: 'solid',
      head: 'normal',
      navigateTo: 'cloud-to-amazon',
      isCustomized: true,
    },
  ],
}